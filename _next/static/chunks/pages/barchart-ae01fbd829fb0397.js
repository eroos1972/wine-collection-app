(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{1253:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(7876),o=r(4232),a=r(1746);function l(e){return e}function s(e,t,...r){return c(e,l,t,r)}function c(e,t,r,n){return function e(o,l){if(l>=n.length)return r(o);let s=new a.B,c=n[l++],i=-1;for(let e of o){let t=c(e,++i,o),r=s.get(t);r?r.push(e):s.set(t,[e])}for(let[t,r]of s)s.set(t,e(r,l));return t(s)}(e,0)}var i=r(6039);function u(e,...t){if("function"!=typeof e[Symbol.iterator])throw TypeError("values is not iterable");e=Array.from(e);let[r]=t;if(r&&2!==r.length||t.length>1){var n;let o=Uint32Array.from(e,(e,t)=>t);return t.length>1?(t=t.map(t=>e.map(t)),o.sort((e,r)=>{for(let n of t){let t=d(n[e],n[r]);if(t)return t}})):(r=e.map(r),o.sort((e,t)=>d(r[e],r[t]))),n=e,Array.from(o,e=>n[e])}return e.sort(function(e=i.A){if(e===i.A)return d;if("function"!=typeof e)throw TypeError("compare is not a function");return(t,r)=>{let n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(r))}function d(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:+(e>t))}var h=r(8187),f=r(7160);let m=e=>{let{colorScale:t,tickSize:r,tickTextOffset:o,tickSpacing:a,onHover:l,fadeOpacity:s,hoveredValue:c}=e;return t.domain().map((e,i)=>(0,n.jsxs)("g",{className:"tick",transform:"translate(0, ".concat(i*a,")"),onMouseEnter:()=>{l(e)},onMouseOut:()=>{l(null)},opacity:c&&e!==c?s:1,children:[(0,n.jsx)("rect",{fill:t(e),width:r,height:r}),(0,n.jsx)("text",{x:o,dy:"0.55em",children:e})]},i))},x=e=>{let{yScale:t,tickOffset:r=3}=e;return t.domain().map(e=>(0,n.jsx)("g",{className:"tick",children:(0,n.jsx)("text",{style:{textAnchor:"end"},x:-r,dy:".32em",y:t(e)+t.bandwidth()/2,children:e})},e))},y=e=>{let{xScale:t,innerHeight:r}=e;return t.ticks().map(e=>(0,n.jsxs)("g",{className:"tick",transform:"translate(".concat(t(e),",0)"),children:[(0,n.jsx)("line",{y2:r}),(0,n.jsx)("text",{style:{textAnchor:"middle"},dy:".71em",y:r+3,children:e})]},e))},p=e=>{let{data:t,xScale:r,yScale:o,fillColor:a,stroke:l=!1}=e;return t.map((e,t)=>(0,n.jsx)("rect",{x:r(e[0]),y:o(e.data.country),width:r(e[1])-r(e[0]),height:o.bandwidth(),fill:a,stroke:l?"#635F5D":"none",children:(0,n.jsx)("title",{children:e[1]-e[0]})},t))},g={top:20,right:120,bottom:65,left:150},w=960-g.left-g.right,j=500-g.top-g.bottom,k=["Red","White","Other","Ros\xe9"],b=()=>{let e=(0,f.E)(),[t,r]=(0,o.useState)(null);if(!e)return(0,n.jsx)("pre",{children:"Loading..."});let a=s(e,e=>e.length,e=>e.Country,e=>e.Color),d=e=>e.map(e=>Array.from(e[1].values().reduce((e,t)=>e+t,0))),b=(function(e,t,r){return(2!==t.length?u(s(e,t,r),([e,t],[r,n])=>(0,i.A)(t,n)||(0,i.A)(e,r)):u(function(e,...t){return c(e,l,l,t)}(e,r),([e,r],[n,o])=>t(r,o)||(0,i.A)(e,n))).map(([e])=>e)})(a,e=>-d(e),e=>e).map(e=>({country:e[0],values:k.map(t=>({color:t,count:e[1].get(t)||0}))})),A=(0,h.t$z)().keys(k).value((e,t)=>e.values.find(e=>e.color===t).count)(b),v=(0,h.UMr)().domain(k).range(["#A81944","#E5E680","#7F7F7F","#F3B0A9"]),E=(0,h.WH)().domain(b.map(e=>e.country)).range([0,j]).padding(.1),N=(0,h.m4Y)().domain((0,h.Xxv)(A.flat(2))).range([0,w]),S=A.filter(e=>t===e.key);return(0,n.jsxs)("svg",{width:960,height:500,children:[(0,n.jsxs)("g",{transform:"translate(".concat(g.left,",").concat(g.top,")"),children:[(0,n.jsx)(x,{yScale:E}),(0,n.jsx)(y,{xScale:N,innerHeight:j}),(0,n.jsx)("text",{className:"axis-label",x:w/2,y:j+30,textAnchor:"middle",children:"Number of bottles"}),A.map((e,r)=>(0,n.jsx)("g",{className:"stacked",opacity:t?.2:.8,children:(0,n.jsx)(p,{data:e,xScale:N,yScale:E,fillColor:v(e.key)})},r)),S.map((e,t)=>(0,n.jsx)(p,{data:e,xScale:N,yScale:E,fillColor:v(e.key),stroke:!0},t))]}),(0,n.jsxs)("g",{transform:"translate(".concat(w+175,", 60)"),children:[(0,n.jsx)("text",{x:35,y:-25,className:"axis-label",textAnchor:"middle",children:"Wine Color"}),(0,n.jsx)(m,{tickSpacing:15,tickTextOffset:15,tickSize:10,onHover:r,hoveredValue:t,fadeOpacity:.2,colorScale:v})]})]})}},5021:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/barchart",function(){return r(1253)}])},7160:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var n=r(4232),o=r(8187);let a=()=>{let[e,t]=(0,n.useState)(null);return(0,n.useEffect)(()=>{fetch("https://www.cellartracker.com/xlquery.asp?User=eweroos@gmail.com&Password=bugWe5-wyqduc-sythin&Format=csv&Table=Inventory").then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.blob()}).then(e=>{let r=new FileReader;r.onload=e=>{let r=e.target.result,n=new TextDecoder("ISO-8859-1").decode(new Uint8Array(r));t((0,o.swJ)(n))},r.readAsArrayBuffer(e)}).catch(e=>{console.error("There was a problem with the fetch operation:",e)})},[]),e}}},e=>{var t=t=>e(e.s=t);e.O(0,[187,636,593,792],()=>t(5021)),_N_E=e.O()}]);